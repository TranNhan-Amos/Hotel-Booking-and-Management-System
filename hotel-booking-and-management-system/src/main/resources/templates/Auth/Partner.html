<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Đối tác - Grand Ocean</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #1a2980, #26d0ce);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .partner-info-card {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #1a2980;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .info-item h4 {
            color: #1a2980;
            margin-bottom: 10px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .info-item p {
            color: #333;
            font-size: 16px;
            font-weight: 500;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card i {
            font-size: 40px;
            color: #1a2980;
            margin-bottom: 15px;
        }
        
        .stat-card h3 {
            font-size: 28px;
            color: #333;
            margin-bottom: 5px;
        }
        
        .stat-card p {
            color: #666;
            font-size: 14px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #1a2980, #26d0ce);
            color: white;
        }
        
        .btn-secondary {
            background: #f1f3f5;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .no-partner-info {
            text-align: center;
            padding: 60px 20px;
        }
        
        .no-partner-info i {
            font-size: 80px;
            color: #ddd;
            margin-bottom: 20px;
        }
        
        .no-partner-info h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .no-partner-info p {
            color: #666;
            margin-bottom: 30px;
        }
        
        .error-message {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                margin: 10px;
            }
            
            .content {
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                justify-content: center;
            }
        }
        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .toast {
            min-width: 300px;
            padding: 16px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        .toast.hide {
            transform: translateX(400px);
            opacity: 0;
        }
        .toast-success {
            background: linear-gradient(135deg, #10b981, #059669);
            border-left: 4px solid #047857;
        }
        .toast-error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-left: 4px solid #b91c1c;
        }
        .toast-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-left: 4px solid #b45309;
        }
        .toast-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border-left: 4px solid #1d4ed8;
        }
        .toast-icon {
            font-size: 20px;
            flex-shrink: 0;
        }
        .toast-content {
            flex: 1;
        }
        .toast-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }
        .toast-message {
            font-size: 13px;
            opacity: 0.9;
        }
        .toast-close {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }
        .toast-close:hover {
            opacity: 1;
        }
        .toast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 0 0 12px 12px;
            animation: toastProgress 5s linear forwards;
        }
        @keyframes toastProgress {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        .partner-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 700px;
            text-align: center;
            animation: popIn 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            transform: scale(0.95);
            opacity: 0;
            margin: 30px 0;
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.95) translateY(30px); filter: blur(5px); }
            100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
        }
        
        .header {
            margin-bottom: 30px;
            position: relative;
        }
        .header h2 {
            font-size: 32px;
            color: #1a2980;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .header p {
            color: #555;
            font-size: 16px;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .benefits-section {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }
        .benefit-card {
            background: rgba(107, 72, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            width: calc(33.333% - 20px);
            min-width: 200px;
            transition: all 0.3s ease;
        }
        .benefit-card:hover {
            transform: translateY(-5px);
            background: rgba(107, 72, 255, 0.15);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        .benefit-card i {
            font-size: 32px;
            color: #6b48ff;
            margin-bottom: 15px;
        }
        .benefit-card h3 {
            font-size: 18px;
            color: #1a2980;
            margin-bottom: 10px;
        }
        .benefit-card p {
            font-size: 14px;
            color: #555;
        }
        
        .partner-form {
            background: #f8f9ff;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: left;
        }
        .form-section-title {
            font-size: 20px;
            color: #1a2980;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(26, 41, 128, 0.1);
        }
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }
        .form-group {
            flex: 1;
            min-width: 250px;
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }
        .form-group label.required::after {
            content: ' *';
            color: #e74c3c;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 14px 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 14px;
            color: #333;
            background: white;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            background: #fff;
            transform: scale(1.01);
            box-shadow: 0 0 12px rgba(107, 72, 255, 0.2);
            outline: none;
            border-color: #6b48ff;
        }
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        .file-upload {
            display: flex;
            flex-direction: column;
        }
        .file-upload-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            background: #f1f3f5;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            border: 1px dashed #ccc;
        }
        .file-upload-label:hover {
            background: #e6e9ff;
            border-color: #6b48ff;
        }
        .file-upload-label i {
            margin-right: 10px;
            color: #6b48ff;
        }
        .file-upload input[type="file"] {
            display: none;
        }
        .selected-files {
            margin-top: 10px;
            font-size: 13px;
            color: #666;
        }
        
        .checkbox-group {
            display: flex;
            align-items: flex-start;
            margin: 25px 0;
        }
        .checkbox-group input {
            margin-top: 5px;
            margin-right: 12px;
        }
        .checkbox-group label { 
            font-size: 14px; 
            color: #333;
            text-align: left;
        }
        .checkbox-group a {
            color: #6b48ff;
            text-decoration: none;
            font-weight: 500;
        }
        .checkbox-group a:hover {
            text-decoration: underline;
        }
        
        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #1a2980, #26d0ce);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            margin-top: 10px;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(26, 41, 128, 0.4);
        }
        
        .login-suggestion {
            margin-top: 25px;
            font-size: 14px;
            color: #555;
        }
        .login-suggestion a {
            color: #1a2980;
            text-decoration: none;
            font-weight: 500;
        }
        .login-suggestion a:hover {
            text-decoration: underline;
        }
        
        .footer-note {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #777;
            font-size: 13px;
            line-height: 1.6;
        }
        
        /* Loading state */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .toast-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }
            .toast {
                min-width: auto;
                width: 100%;
            }
            .partner-container {
                margin: 20px;
                padding: 25px;
            }
            .benefit-card {
                width: 100%;
            }
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <div class="dashboard-container">
        <div class="header">
            <h1>Dashboard Đối tác</h1>
            <p>Quản lý thông tin khách sạn và theo dõi hiệu suất kinh doanh</p>
        </div>
        
        <div class="content">
            <!-- Error Message -->
            <div th:if="${error}" class="error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <span th:text="${error}"></span>
            </div>
            
            <!-- Partner Information Section -->
            <div th:if="${hasPartnerInfo}">
                <div class="partner-info-card">
                    <h2>Thông tin Đối tác</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <h4>Tên Doanh nghiệp</h4>
                            <p th:text="${partner.companyName}">Tên công ty</p>
                        </div>
                        <div class="info-item">
                            <h4>Mã số thuế</h4>
                            <p th:text="${partner.taxId ?: 'Chưa cập nhật'}">Mã số thuế</p>
                        </div>
                        <div class="info-item">
                            <h4>Địa chỉ</h4>
                            <p th:text="${partner.address}">Địa chỉ</p>
                        </div>
                        <div class="info-item">
                            <h4>Người liên hệ</h4>
                            <p th:text="${partner.contactPerson}">Người liên hệ</p>
                        </div>
                        <div class="info-item">
                            <h4>Email</h4>
                            <p th:text="${partner.email}">Email</p>
                        </div>
                        <div class="info-item">
                            <h4>Số điện thoại</h4>
                            <p th:text="${partner.phone}">Số điện thoại</p>
                        </div>
                        <div class="info-item" th:if="${partner.businessLicense}">
                            <h4>Giấy phép kinh doanh</h4>
                            <p th:text="${partner.businessLicense}">Số giấy phép</p>
                        </div>
                        <div class="info-item" th:if="${partner.businessmodel}">
                            <h4>Mô hình kinh doanh</h4>
                            <p th:text="${partner.businessmodel}">Mô hình</p>
                        </div>
                    </div>
                </div>
                
                <!-- Statistics Section -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-bed"></i>
                        <h3>0</h3>
                        <p>Tổng số phòng</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar-check"></i>
                        <h3>0</h3>
                        <p>Đặt phòng tháng này</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-star"></i>
                        <h3>0.0</h3>
                        <p>Đánh giá trung bình</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-dollar-sign"></i>
                        <h3>0đ</h3>
                        <p>Doanh thu tháng này</p>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="/partner/rooms" class="btn btn-primary">
                        <i class="fas fa-bed"></i>
                        Quản lý phòng
                    </a>
                    <a href="/partner/bookings" class="btn btn-primary">
                        <i class="fas fa-calendar-alt"></i>
                        Quản lý đặt phòng
                    </a>
                    <a href="/partner/reviews" class="btn btn-secondary">
                        <i class="fas fa-star"></i>
                        Xem đánh giá
                    </a>
                    <a href="/partner/profile/edit" class="btn btn-secondary">
                        <i class="fas fa-edit"></i>
                        Chỉnh sửa thông tin
                    </a>
                    <a href="/logout" class="btn btn-secondary">
                        <i class="fas fa-sign-out-alt"></i>
                        Đăng xuất
                    </a>
                </div>
            </div>
            
            <!-- No Partner Info Section -->
            <div th:unless="${hasPartnerInfo}" class="no-partner-info">
                <i class="fas fa-user-plus"></i>
                <h3>Chưa có thông tin đối tác</h3>
                <p>Bạn cần hoàn thiện thông tin đối tác để sử dụng đầy đủ các tính năng của hệ thống.</p>
                <a href="/partner/register" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    Đăng ký thông tin đối tác
                </a>
            </div>
        </div>
    </div>

    <script>
        // Add some interactive features
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stat cards on load
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 100);
            });
        });
        // Toast Notification System
        const toastContainer = document.getElementById('toastContainer');

        function showToast(message, type = 'info', title = '', duration = 5000) {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };
            
            const titles = {
                success: title || 'Thành công!',
                error: title || 'Lỗi!',
                warning: title || 'Cảnh báo!',
                info: title || 'Thông tin!'
            };
            
            toast.innerHTML = `
                <i class="toast-icon ${icons[type]}"></i>
                <div class="toast-content">
                    <div class="toast-title">${titles[type]}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="removeToast(this.parentElement)">&times;</button>
                <div class="toast-progress"></div>
            `;
            
            toastContainer.appendChild(toast);
            
            // Show toast with animation
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);
            
            // Auto remove after duration
            setTimeout(() => {
                removeToast(toast);
            }, duration);
            
            return toast;
        }
        
        function removeToast(toast) {
            if (toast && toast.parentElement) {
                toast.classList.add('hide');
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.parentElement.removeChild(toast);
                    }
                }, 400);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const partnerForm = document.getElementById('partnerForm');
            const fileUploadInput = document.getElementById('file-upload-input');
            const selectedFilesElement = document.getElementById('selected-files');
            
            // File upload handling
            fileUploadInput.addEventListener('change', function() {
                if (this.files.length > 0) {
                    const fileNames = Array.from(this.files).map(file => file.name);
                    selectedFilesElement.textContent = `Đã chọn: ${fileNames.join(', ')}`;
                } else {
                    selectedFilesElement.textContent = 'Chưa có tệp nào được chọn';
                }
            });
            
            // Form validation and submission
            function validatePartnerForm() {
                // Get form values
                const companyName = document.getElementById('company-name').value;
                const contactPerson = document.getElementById('contact-person').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                const propertyType = document.getElementById('property-type').value;
                const roomDescription = document.getElementById('room-description').value;
                const terms = document.getElementById('terms').checked;
                
                // Validation checks
                if (!companyName.trim()) {
                    showToast('Vui lòng nhập tên doanh nghiệp!', 'warning');
                    return false;
                }
                
                if (!contactPerson.trim()) {
                    showToast('Vui lòng nhập tên người liên hệ!', 'warning');
                    return false;
                }
                
                if (!phone.trim()) {
                    showToast('Vui lòng nhập số điện thoại!', 'warning');
                    return false;
                }
                
                if (!email.trim()) {
                    showToast('Vui lòng nhập email!', 'warning');
                    return false;
                }
                
                if (password.length < 8) {
                    showToast('Mật khẩu phải có ít nhất 8 ký tự!', 'warning');
                    return false;
                }
                
                if (password !== confirmPassword) {
                    showToast('Mật khẩu xác nhận không khớp!', 'error');
                    return false;
                }
                
                if (propertyType === '') {
                    showToast('Vui lòng chọn loại hình cơ sở lưu trú!', 'warning');
                    return false;
                }
                
                if (!roomDescription.trim()) {
                    showToast('Vui lòng nhập mô tả về các loại phòng!', 'warning');
                    return false;
                }
                
                if (!terms) {
                    showToast('Vui lòng đồng ý với điều khoản sử dụng!', 'warning');
                    return false;
                }
                
                return true;
            }
            
            // Form submission
            partnerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!validatePartnerForm()) {
                    return;
                }
                
                // Show loading state
                const submitBtn = partnerForm.querySelector('.submit-btn');
                const originalText = submitBtn.textContent;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang gửi đơn đăng ký...';
                submitBtn.disabled = true;
                partnerForm.classList.add('loading');
                
                // Simulate form submission
                setTimeout(() => {
                    // Reset button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    partnerForm.classList.remove('loading');
                    
                    // Show success message
                    showToast(
                        'Đơn đăng ký của bạn đã được gửi thành công! Chúng tôi sẽ liên hệ với bạn trong thời gian sớm nhất.', 
                        'success', 
                        'Đăng ký thành công!'
                    );
                    
                    // Reset form
                    partnerForm.reset();
                    selectedFilesElement.textContent = 'Chưa có tệp nào được chọn';
                }, 2000);
            });
            
            // Show welcome notification
            setTimeout(() => {
                showToast(
                    'Đăng ký trở thành đối tác để tiếp cận hàng ngàn khách hàng tiềm năng!', 
                    'info', 
                    'Chào mừng đến với Grand Ocean'
                );
            }, 1000);
        });
    </script>
</body>
</html>
